<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Client Traffic Cards Batch</title>
<style>
@font-face {
  font-family: "Storopia";
  src: url("https://raw.githubusercontent.com/dim-ghub/fonts/refs/heads/main/Storopia.ttf") format("truetype");
}
:root {
  --bg: #0d141f;
  --card: #1a2233;
  --muted: #9da7b4;
  --accent: #ff8c3d;
  --success: #00c896;
  --silver: #c0c4cc;
}
* {
  box-sizing: border-box;
  font-family: "Storopia", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}
body {
  margin: 24px;
  background: var(--bg);
  color: #ffffff;
}
.wrap {
  max-width: 1000px;
  margin: 0 auto;
}
.card {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  border: 1px solid var(--card);
  padding: 18px;
  border-radius: 10px;
  display: flex;
  align-items: flex-start;
  gap: 18px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}
.client {
  min-width: 360px;
  flex: 1;
}
.client .name {
  font-size: 16px;
  font-weight: 700;
  color: #ffffff;
}
.client .phone {
  color: var(--silver);
  margin-top: 6px;
}
.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: #111b2a;
  padding: 6px 8px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.05);
}
.traffic {
  flex: 1;
  min-width: 260px;
}
.usage {
  margin-top: 8px;
}
.bar {
  height: 12px;
  background: rgba(255,255,255,0.06);
  border-radius: 8px;
  overflow: hidden;
  position: relative;
  margin-bottom: 6px;
}
.bar .fill {
  height: 100%;
  width: 0%;
  transition: width .4s ease;
}
.fill-traffic {
  background: linear-gradient(90deg, var(--accent), #ffb37a);
}
.fill-time {
  background: linear-gradient(90deg, var(--success), #50e6b9);
}
.stats {
  display: flex;
  gap: 12px;
  color: var(--muted);
  font-size: 13px;
  flex-wrap: wrap;
  margin-top: 4px;
}
.stat {
  background: rgba(255,255,255,0.02);
  padding: 6px 10px;
  border-radius: 8px;
}
.right {
  min-width: 220px;
  text-align: right;
  flex-shrink: 0;
}
.duration {
  color: var(--success);
  font-size: 13px;
  margin-top: -2px;
}
.controls {
  margin-top: 18px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
label {
  display: block;
  font-size: 13px;
  color: var(--muted);
  margin-bottom: 6px;
}
input[type="text"],
input[type="number"] {
  width: 100%;
  padding: 8px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.02);
  color: #fff;
}
.btn {
  display: inline-block;
  padding: 8px 12px;
  border-radius: 8px;
  background: var(--accent);
  color: #061018;
  border: none;
  cursor: pointer;
  font-family: inherit;
}
.small {
  font-size: 12px;
  color: var(--muted);
}
@media(max-width:760px) {
  .card { flex-direction: column; align-items: stretch; }
  .right { text-align: left; margin-top: 12px; }
  .client { margin-bottom: 12px; }
}
</style>
</head>
<body>
<div class="wrap">

  <div id="cardsContainer"></div>

  <div class="controls">
    <div>
      <label>Client name</label>
      <input type="text" id="inpName" placeholder="Enter client name">
    </div>
    <div>
      <label>Client phone / note</label>
      <input type="text" id="inpPhone" placeholder="Enter phone or note">
    </div>
    <div>
      <label>Quota (GB)</label>
      <input type="number" id="inpQuota" min="1" step="0.01" placeholder="0">
    </div>
    <div>
      <label>Used (GB)</label>
      <input type="number" id="inpUsed" min="0" step="0.01" placeholder="0">
    </div>
    <div>
      <label>Remaining time (days)</label>
      <input type="number" id="inpDays" min="0" step="1" placeholder="0">
    </div>
    <div>
      <label>Remaining hours</label>
      <input type="number" id="inpHours" min="0" max="23" step="1" placeholder="0">
    </div>

    <div style="grid-column:1/3; display:flex; gap:8px; justify-content:flex-end;">
      <button class="btn" id="addCardBtn">Add Card</button>
      <button class="btn" id="exportAllBtn" style="background:#1d7aef">Export All Cards</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
const cardsContainer = document.getElementById('cardsContainer');
const inpName = document.getElementById('inpName');
const inpPhone = document.getElementById('inpPhone');
const inpQuota = document.getElementById('inpQuota');
const inpUsed = document.getElementById('inpUsed');
const inpDays = document.getElementById('inpDays');
const inpHours = document.getElementById('inpHours');
const addCardBtn = document.getElementById('addCardBtn');
const exportAllBtn = document.getElementById('exportAllBtn');

function createCard({name, phone, quota, used, days, hours}) {
  const card = document.createElement('div');
  card.className = 'card';
  card.innerHTML = `
    <div class="client">
      <div style="display:flex;align-items:center;gap:12px">
        <div style="width:48px;height:48px;border-radius:8px;background:linear-gradient(180deg,#142c3a,#0b1b24);display:flex;align-items:center;justify-content:center;font-weight:700">?</div>
        <div>
          <div class="name">${name}</div>
          <div class="phone">${phone}</div>
        </div>
      </div>
      <div class="usage">
        <div class="bar"><div class="fill fill-traffic" style="width:0%"></div></div>
        <div class="bar"><div class="fill fill-time" style="width:0%"></div></div>
        <div class="stats">
          <div class="stat">Used: <span class="usedGB">0.00 GB</span></div>
          <div class="stat">Quota: <span class="quotaGB">0.00 GB</span></div>
          <div class="stat">Remaining: <span class="remaining">0d 0h</span></div>
        </div>
      </div>
    </div>
    <div class="right">
      <div class="pill">
        <small class="small">Status</small>
        <div style="width:8px;height:8px;border-radius:50%;background:var(--success)"></div>
      </div>
    </div>
  `;
  cardsContainer.appendChild(card);

  const usedFixed = (used || 0).toFixed(2);
  const quotaFixed = (quota || 0).toFixed(2);
  const trafficPercent = quota > 0 ? Math.min(100, (used / quota) * 100) : 0;
  const totalHours = 30*24;
  const remainingHours = (days||0)*24 + (hours||0);
  const timePercent = Math.min(100, (remainingHours / totalHours) * 100);

  card.querySelector('.fill-traffic').style.width = trafficPercent + '%';
  card.querySelector('.fill-time').style.width = timePercent + '%';
  card.querySelector('.usedGB').textContent = usedFixed + ' GB';
  card.querySelector('.quotaGB').textContent = quotaFixed + ' GB';
  card.querySelector('.remaining').textContent = (days||0)+'d '+(hours||0)+'h';
}

addCardBtn.addEventListener('click', () => {
  const data = {
    name: inpName.value || '—',
    phone: inpPhone.value || '—',
    quota: parseFloat(inpQuota.value) || 0,
    used: parseFloat(inpUsed.value) || 0,
    days: parseInt(inpDays.value) || 0,
    hours: parseInt(inpHours.value) || 0
  };
  createCard(data);
  inpName.value = inpPhone.value = inpQuota.value = inpUsed.value = inpDays.value = inpHours.value = '';
});

exportAllBtn.addEventListener('click', async () => {
  const cards = cardsContainer.querySelectorAll('.card');
  let count = 1;
  for (const card of cards) {
    const canvas = await html2canvas(card, {scale:2, backgroundColor:null});
    const link = document.createElement('a');
    link.download = `client-card-${count}.png`;
    link.href = canvas.toDataURL('image/png');
    link.click();
    count++;
  }
});
</script>
</body>
</html>
